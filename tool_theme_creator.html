<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§å¯Œç¿ä¸»é¡Œç”¢ç”Ÿå™¨ Pro | AI Powered</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-hover: #4f46e5;
            --glass: rgba(255, 255, 255, 0.8);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #1f2937;
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 1.5rem;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        .input-stylish {
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .input-stylish:focus {
            background: white;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2);
            outline: none;
        }

        .btn-primary {
            background: linear-gradient(to right, #6366f1, #8b5cf6);
            color: white;
            transition: all 0.3s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.4);
        }

        .map-container {
            position: relative;
            width: 100%;
            border-radius: 1rem;
            overflow: hidden;
            cursor: crosshair;
            background: #e2e8f0;
            border: 2px dashed #94a3b8;
        }

        .map-point {
            position: absolute;
            width: 28px;
            height: 28px;
            background: var(--primary);
            border: 3px solid white;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 14px;
            font-weight: 800;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            pointer-events: none;
            transition: all 0.2s;
        }

        .ai-glow {
            position: relative;
        }

        .ai-glow::after {
            content: '';
            position: absolute;
            inset: -2px;
            background: linear-gradient(45deg, #f06, #9f6, #06f, #f06);
            border-radius: inherit;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s;
            filter: blur(8px);
        }

        .ai-glow:hover::after {
            opacity: 0.6;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }
    </style>
  <script type="module" crossorigin src="./assets/tool-DkbKktb8.js"></script>
  <link rel="modulepreload" crossorigin href="./assets/global_config-BC-EMzQB.js">
</head>

<body class="p-4 md:p-8">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-10 gap-6">
            <div>
                <h1 class="text-5xl font-extrabold text-white drop-shadow-lg tracking-tight">å¤§å¯Œç¿ä¸»é¡Œç”¢ç”Ÿå™¨ <span
                        class="bg-clip-text text-transparent bg-gradient-to-r from-yellow-300 to-orange-400">PRO</span>
                </h1>
                <p class="text-indigo-100 text-lg mt-2 font-light italic">Powered by AI - Create your world in minutes.
                </p>
            </div>
            <div class="flex gap-4">
                <button onclick="document.getElementById('ai-settings-modal').classList.remove('hidden')"
                    class="px-5 py-3 glass-card text-indigo-900 font-bold flex items-center gap-2 hover:bg-white transition-all">
                    âš™ï¸ AI è¨­å®š
                </button>
                <button onclick="publishToCloud()"
                    class="bg-white/90 text-indigo-600 px-6 py-3 rounded-2xl font-bold text-lg shadow-xl flex items-center gap-2 hover:bg-white transition-all border border-indigo-200">
                    â˜ï¸ é›²ç«¯ç™¼ä½ˆ
                </button>
                <button onclick="openCloudThemesModal()"
                    class="px-5 py-3 glass-card text-blue-600 font-bold flex items-center gap-2 hover:bg-white transition-all shadow-lg border-2 border-blue-100">
                    ğŸ“‚ è®€å–é›²ç«¯ä¸»é¡Œ
                </button>
                <a href="./index.html"
                    class="px-5 py-3 glass-card text-gray-600 font-bold flex items-center gap-2 hover:bg-white transition-all text-sm">
                    ğŸ  å›ä¸»é 
                </a>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Side: Config -->
            <div class="lg:col-span-2 space-y-8">

                <section class="glass-card p-8">
                    <div class="flex justify-between items-center mb-6 text-indigo-900 border-b pb-4 border-indigo-100">
                        <h2 class="text-2xl font-bold flex items-center gap-2">âœ¨ 1. ä¸»é¡ŒåŸºå› </h2>
                        <button onclick="aiCompleteInfo()"
                            class="ai-glow px-4 py-2 bg-white rounded-full text-sm font-bold shadow-sm flex items-center gap-2 text-indigo-600">
                            ğŸª„ AI è‡ªå‹•è£œå®Œ
                        </button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label class="text-sm font-bold text-gray-700">ä¸»é¡Œ ID (è‹±æ–‡+ä¸‹åº•ç·š)</label>
                            <input type="text" id="theme-id" placeholder="ä¾‹å¦‚: mars_mission"
                                class="w-full p-3 rounded-xl input-stylish" value="new_adventure">
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-bold text-gray-700">ä¸»é¡Œåç¨± (é¡¯ç¤ºæ–‡å­—)</label>
                            <input type="text" id="theme-name" placeholder="ä¾‹å¦‚: ğŸš€ ç«æ˜Ÿç™»é™¸è¨ˆåŠƒ"
                                class="w-full p-3 rounded-xl input-stylish" value="æ–°ä¸–ç•Œå†’éšª">
                        </div>
                        <div class="md:col-span-2 space-y-2">
                            <label class="text-sm font-bold text-gray-700">ç°¡çŸ­æè¿°</label>
                            <textarea id="theme-desc" rows="2" class="w-full p-3 rounded-xl input-stylish"
                                placeholder="ä»‹ç´¹æ‚¨çš„æ–°å†’éšª..."></textarea>
                        </div>
                        <div class="md:col-span-2 space-y-2">
                            <label class="text-sm font-bold text-gray-700">NPC æ­¡è¿è© (æ­¡è¿ä¾†åˆ°...)</label>
                            <input type="text" id="txt-welcome" placeholder="ä¾‹å¦‚: å†’éšªè€…ï¼Œæ­¡è¿ä¾†åˆ°ç¥ç¥•çš„ç«æ˜Ÿï¼"
                                class="w-full p-3 rounded-xl input-stylish">
                        </div>
                        <div class="md:col-span-2 space-y-2">
                            <label class="text-sm font-bold text-gray-700">Google App Script (GAS) ç¶²å€</label>
                            <input type="text" id="gas-url" placeholder="https://script.google.com/..."
                                class="w-full p-3 rounded-xl input-stylish font-mono text-xs">
                        </div>
                    </div>
                </section>

                <!-- 2. AI è¦–è¦ºä¸­å¿ƒ -->
                <section class="glass-card p-8 bg-white/40">
                    <div class="flex justify-between items-center mb-6 text-indigo-900 border-b pb-4 border-indigo-100">
                        <h2 class="text-2xl font-bold flex items-center gap-2">ğŸ¨ 2. AI è¦–è¦ºææ¡ˆ</h2>
                    </div>
                    <div class="space-y-6">
                        <div
                            class="bg-purple-50 p-6 rounded-2xl border border-purple-100 flex flex-col md:flex-row gap-6 items-center">
                            <div class="flex-grow">
                                <h3 class="font-bold text-purple-900 mb-1 text-lg">ç”Ÿæˆç¹ªåœ–æç¤ºè©</h3>
                                <p class="text-sm text-purple-600">æ ¹æ“šæ‚¨çš„ä¸»é¡Œåç¨±ï¼Œè‡ªå‹•æ§‹æƒ³è¦–è¦ºå ´æ™¯ã€è§’è‰²é¢¨æ ¼èˆ‡éŸ³æ¨‚èª¿æ€§ã€‚</p>
                            </div>
                            <button onclick="aiGeneratePrompts()"
                                class="w-full md:w-auto px-8 py-4 bg-purple-600 text-white rounded-2xl font-extrabold shadow-lg hover:bg-purple-700 transition-all active:scale-95 flex items-center justify-center gap-2">
                                âœ¨ ç”Ÿæˆ AI æç¤ºè©
                            </button>
                        </div>

                        <div id="ai-prompts-output"
                            class="text-sm text-gray-700 bg-white/80 p-6 rounded-2xl hidden border border-purple-100 leading-relaxed space-y-4 shadow-inner">
                        </div>

                        <div id="prompts-control" class="hidden grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div
                                class="p-4 bg-white/50 rounded-xl border border-indigo-50 flex flex-col items-center gap-3">
                                <span class="text-xs font-bold text-indigo-400 uppercase tracking-widest">åš®å° NPC</span>
                                <button onclick="generateAIImage('prompt-npc', null, 'img-guideNPC')"
                                    class="w-full py-3 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition-all shadow-md">ğŸª„
                                    ç”Ÿæˆ NPC åœ–åƒ</button>
                            </div>
                            <div
                                class="p-4 bg-white/50 rounded-xl border border-indigo-50 flex flex-col items-center gap-3">
                                <span class="text-xs font-bold text-indigo-400 uppercase tracking-widest">è¼‰å…¥å‹•ç•«</span>
                                <button onclick="generateAIImage('prompt-loading', null, 'img-loadingGif')"
                                    class="w-full py-3 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition-all shadow-md">ğŸª„
                                    ç”Ÿæˆè¼‰å…¥åœ–</button>
                            </div>
                            <div
                                class="p-4 bg-white/50 rounded-xl border border-indigo-50 flex flex-col items-center gap-3">
                                <span class="text-xs font-bold text-indigo-400 uppercase tracking-widest">è§’è‰²é ­åƒ</span>
                                <button onclick="generateAIAvatars()"
                                    class="w-full py-3 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition-all shadow-md">ğŸª„
                                    ç”Ÿæˆ 4 çµ„é ­åƒ</button>
                            </div>
                        </div>

                        <!-- éš±è—çš„ Prompt å®¹å™¨ -->
                        <textarea id="prompt-map" class="hidden"></textarea>
                        <textarea id="prompt-npc" class="hidden"></textarea>
                        <textarea id="prompt-loading" class="hidden"></textarea>
                        <textarea id="prompt-avatar" class="hidden"></textarea>
                    </div>
                </section>

                <!-- 3. åœ°åœ–ä½ˆå±€ -->
                <section class="glass-card p-8">
                    <div class="flex justify-between items-center mb-6 text-indigo-900 border-b pb-4 border-indigo-100">
                        <h2 class="text-2xl font-bold flex items-center gap-2">ğŸ—ºï¸ 3. åœ°åœ–å°èˆª</h2>
                        <div class="text-sm px-4 py-1 bg-indigo-100 rounded-full font-bold">
                            ç¯€é»: <span id="point-count" class="text-indigo-600">0</span> / 20 (è‡³å°‘ 1 å€‹)
                        </div>
                    </div>
                    <p class="text-sm text-gray-500 mb-6">è«‹å…ˆç”Ÿæˆï¼ˆæˆ–ä¸Šå‚³ï¼‰åœ°åœ–èƒŒæ™¯ï¼Œæ¥è‘—åœ¨åœ°åœ–ä¸Šé»æ“Šä»¥æ¨™è¨˜éŠæˆ²ç¯€é»ä½ç½®ã€‚</p>

                    <div
                        class="mb-6 flex flex-wrap gap-4 items-center p-4 bg-white/40 rounded-2xl border border-indigo-50">
                        <div class="flex-grow">
                            <label class="block text-xs font-bold text-gray-400 mb-1 uppercase tracking-widest">æ–¹æ³• A:
                                ä¸Šå‚³åœ–æª”</label>
                            <input type="file" id="map-upload" accept="image/*"
                                class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-xs file:font-semibold file:bg-white file:text-indigo-700 hover:file:bg-indigo-50" />
                        </div>
                        <div class="hidden md:block w-px h-10 bg-indigo-100"></div>
                        <div class="flex-grow md:flex-grow-0">
                            <label class="block text-xs font-bold text-gray-400 mb-1 uppercase tracking-widest">æ–¹æ³• B: AI
                                ç¹ªåœ–</label>
                            <button onclick="generateAIImage('prompt-map', 'map-preview', 'img-mapBg')"
                                class="w-full md:w-auto px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold shadow-md flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all active:scale-95 disabled:opacity-50"
                                id="btn-gen-map" disabled title="è«‹å…ˆç”Ÿæˆ AI æç¤ºè©">
                                ğŸª„ AI ç”Ÿæˆåœ°åœ–
                            </button>
                        </div>
                        <button id="undo-point"
                            class="px-4 py-2 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 disabled:opacity-50 transition-all font-bold"
                            disabled>â†©ï¸ å¤åŸ</button>
                    </div>

                    <div id="map-preview-container" class="map-container shadow-2xl">
                        <img id="map-preview" class="w-full min-h-[400px] object-cover"
                            src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='800' height='600'><rect width='100%' height='100%' fill='%23f1f5f9'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='20' fill='%2394a3b8'>è«‹ä¸Šå‚³åœ°åœ–èƒŒæ™¯æˆ–è¼¸å…¥ AI æç¤º</text></svg>">
                        <div id="map-points-layer" class="absolute inset-0"></div>
                    </div>
                </section>

                <!-- 4. éŠæˆ²è…³æœ¬èˆ‡é¡Œç›® -->
                <section class="glass-card p-8 bg-white/40">
                    <h2 class="text-2xl font-bold text-indigo-900 mb-6 flex items-center gap-2">ğŸ§  4. éŠæˆ²å…§å®¹ç”Ÿæˆ</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-indigo-900">
                        <!-- AI æ–‡å­— -->
                        <div class="space-y-6">
                            <div class="space-y-3">
                                <label class="block text-sm font-bold">NPC é–’èŠå°è©±</label>
                                <button onclick="aiGenerateChats()"
                                    class="w-full py-2 bg-indigo-50 border border-indigo-200 rounded-xl text-sm font-bold hover:bg-indigo-100 transition-colors">âœ¨
                                    ç”Ÿæˆ AI å°è©±</button>
                                <textarea id="txt-idle" rows="4" class="w-full p-3 rounded-xl input-stylish text-sm"
                                    placeholder="ä¸€è¡Œä¸€å¥..."></textarea>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="space-y-2">
                                    <label class="block text-sm font-bold">æš±ç¨±å½¢å®¹è©</label>
                                    <button onclick="aiGenerateList('adj')"
                                        class="text-xs text-indigo-600 font-bold hover:underline mb-1">AI ç”Ÿæˆ</button>
                                    <textarea id="txt-adj" rows="4"
                                        class="w-full p-2 rounded-xl input-stylish text-xs font-mono"></textarea>
                                </div>
                                <div class="space-y-2">
                                    <label class="block text-sm font-bold">æš±ç¨±åè©</label>
                                    <button onclick="aiGenerateList('noun')"
                                        class="text-xs text-indigo-600 font-bold hover:underline mb-1">AI ç”Ÿæˆ</button>
                                    <textarea id="txt-noun" rows="4"
                                        class="w-full p-2 rounded-xl input-stylish text-xs font-mono"></textarea>
                                </div>
                            </div>
                        </div>
                        <!-- AI é¡Œç›® -->
                        <div class="space-y-4">
                            <div class="space-y-2 border-l-4 border-orange-400 pl-4 py-1">
                                <h4 class="font-bold text-orange-950">å€åŸŸ A: é¡Œç›®ç”Ÿæˆè¨­å®š</h4>
                                <label class="block text-xs font-bold text-orange-700">è‡ªè¨‚é¡Œç›®ä¸»é¡Œ (é¸å¡«)</label>
                                <textarea id="ai-questions-topic" rows="2"
                                    class="w-full p-2.5 rounded-xl input-stylish text-xs"
                                    placeholder="ä¾‹å¦‚ï¼šé—œæ–¼å‹•ç‰©åç¨±ã€åŸºæœ¬åŠ æ¸›æ³•..."></textarea>
                                <button onclick="aiGenerateQuestions()"
                                    class="w-full py-3 bg-orange-500 text-white rounded-xl text-sm font-extrabold hover:bg-orange-600 shadow-md transition-all active:scale-95 flex items-center justify-center gap-2">
                                    âœ¨ æ ¹æ“šæ¨™è¨˜é»ç”Ÿæˆé¡Œç›®
                                </button>
                                <p class="text-[10px] text-orange-600 mt-1 italic font-medium">â€» å°‡æ ¹æ“šæ‚¨åœ¨ã€Œæ­¥é©Ÿ
                                    3ã€æ¨™è¨˜çš„é»ä½æ•¸é‡é€²è¡Œå–åèˆ‡å‡ºé¡Œã€‚</p>
                            </div>

                            <div class="space-y-2 pt-2">
                                <label class="block text-sm font-bold text-gray-500">éŠæˆ²é¡Œç›® JSON é è¦½</label>
                                <div class="relative group">
                                    <textarea id="output-questions-json" rows="8"
                                        class="w-full p-3 rounded-xl input-stylish text-[10px] font-mono bg-gray-900 text-green-400 shadow-inner"
                                        placeholder='{"map": [...], "questions": {...}}'></textarea>
                                    <button onclick="copyToClipboard('output-questions-json')"
                                        class="absolute top-2 right-2 px-2 py-1 bg-gray-700 text-white text-[10px] rounded opacity-0 group-hover:opacity-100 transition-opacity">è¤‡è£½</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- é€²éšè¨­å®š (åŸæœ¬çš„ç¬¬ 4 æ­¥èˆ‡ç¨‹å¼ç¢¼è¼¸å‡º) -->
                <div class="mt-4">
                    <button onclick="document.getElementById('advanced-area').classList.toggle('hidden')"
                        class="text-indigo-300 text-sm font-bold hover:text-white transition-all flex items-center gap-1">
                        âš™ï¸ é€²éšè¨­å®š (è³‡æºè·¯å¾‘èˆ‡åŸå§‹ç¢¼) <span class="text-[10px]">â–¼</span>
                    </button>

                    <div id="advanced-area" class="hidden mt-4 space-y-6">
                        <section class="glass-card p-6">
                            <h2 class="text-xl font-bold text-indigo-900 mb-6 border-b pb-3 border-indigo-100">ğŸ“¦ è³‡æºé…ç½®è·¯å¾‘
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="space-y-4">
                                    <h3 class="text-xs font-extrabold uppercase tracking-widest text-indigo-400">ä¸»è¦è³‡æº
                                        (img/)</h3>
                                    <div class="space-y-2">
                                        <div class="flex items-center gap-2">
                                            <label class="w-16 text-[10px] font-bold text-indigo-800">åœ°åœ–èƒŒæ™¯</label>
                                            <input type="text" id="img-mapBg" value="map_background.png"
                                                class="flex-1 p-1.5 bg-white rounded-lg text-[10px] border border-indigo-100">
                                            <img id="prev-mapBg" class="w-8 h-8 rounded border bg-gray-100 object-cover"
                                                src="">
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <label class="w-16 text-[10px] font-bold text-indigo-800">åš®å° NPC</label>
                                            <input type="text" id="img-guideNPC" value="guide_bear.png"
                                                class="flex-1 p-1.5 bg-white rounded-lg text-[10px] border border-indigo-100">
                                            <img id="prev-guideNPC"
                                                class="w-8 h-8 rounded border bg-gray-100 object-cover" src="">
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <label class="w-16 text-[10px] font-bold text-indigo-800">è¼‰å…¥å‹•ç•«</label>
                                            <input type="text" id="img-loadingGif" value="loading_bear.gif"
                                                class="flex-1 p-1.5 bg-white rounded-lg text-[10px] border border-indigo-100">
                                            <img id="prev-loadingGif"
                                                class="w-8 h-8 rounded border bg-gray-100 object-cover" src="">
                                        </div>
                                    </div>
                                </div>
                                <div class="space-y-4">
                                    <h3 class="text-xs font-extrabold uppercase tracking-widest text-indigo-400">éŸ³æ•ˆ
                                        (sound/)</h3>
                                    <div class="grid grid-cols-1 gap-2">
                                        <div class="flex items-center gap-2">
                                            <input type="text" id="sfx-bgm" placeholder="èƒŒæ™¯éŸ³æ¨‚ BGM"
                                                class="flex-1 p-1.5 bg-white rounded-lg text-[10px] border border-indigo-100">
                                            <button
                                                onclick="generateAIMusic('sfx-bgm', 'upbeat lo-fi game background music')"
                                                class="w-8 h-8 flex items-center justify-center bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 font-bold"
                                                title="AI ç”ŸæˆéŸ³æ¨‚">ğŸª„</button>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="text" id="sfx-click" placeholder="é»æ“ŠéŸ³æ•ˆ Click"
                                                class="flex-1 p-1.5 bg-white rounded-lg text-[10px] border border-indigo-100">
                                            <button
                                                onclick="generateAISFX('sfx-click', 'short subtle interface click sound')"
                                                class="w-8 h-8 flex items-center justify-center bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 font-bold"
                                                title="AI ç”Ÿæˆ">ğŸª„</button>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="text" id="sfx-dice" placeholder="éª°å­éŸ³æ•ˆ Dice"
                                                class="flex-1 p-1.5 bg-white rounded-lg text-[10px] border border-indigo-100">
                                            <button
                                                onclick="generateAISFX('sfx-dice', 'rolling dice on wooden table sound')"
                                                class="w-8 h-8 flex items-center justify-center bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 font-bold"
                                                title="AI ç”Ÿæˆ">ğŸª„</button>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="text" id="sfx-move" placeholder="ç§»å‹•éŸ³æ•ˆ Move"
                                                class="flex-1 p-1.5 bg-white rounded-lg text-[10px] border border-indigo-100">
                                            <button
                                                onclick="generateAISFX('sfx-move', 'fast magic character whoosh or movement sound')"
                                                class="w-8 h-8 flex items-center justify-center bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 font-bold"
                                                title="AI ç”Ÿæˆ">ğŸª„</button>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="text" id="sfx-success" placeholder="æˆåŠŸéŸ³æ•ˆ Success"
                                                class="flex-1 p-1.5 bg-white rounded-lg text-[10px] border border-indigo-100">
                                            <button
                                                onclick="generateAISFX('sfx-success', 'celebratory success fanfare magic sound')"
                                                class="w-8 h-8 flex items-center justify-center bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 font-bold"
                                                title="AI ç”Ÿæˆ">ğŸª„</button>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="text" id="sfx-fail" placeholder="å¤±æ•—éŸ³æ•ˆ Fail"
                                                class="flex-1 p-1.5 bg-white rounded-lg text-[10px] border border-indigo-100">
                                            <button
                                                onclick="generateAISFX('sfx-fail', 'funny failure game over sound short')"
                                                class="w-8 h-8 flex items-center justify-center bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 font-bold"
                                                title="AI ç”Ÿæˆ">ğŸª„</button>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="text" id="sfx-complete" placeholder="é€šé—œéŸ³æ•ˆ Complete"
                                                class="flex-1 p-1.5 bg-white rounded-lg text-[10px] border border-indigo-100">
                                            <button
                                                onclick="generateAISFX('sfx-complete', 'grand orchestral completion achievement sound')"
                                                class="w-8 h-8 flex items-center justify-center bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 font-bold"
                                                title="AI ç”Ÿæˆ">ğŸª„</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="md:col-span-2 space-y-4">
                                    <h3 class="text-xs font-extrabold uppercase tracking-widest text-indigo-400">è§’è‰²é ­åƒ
                                    </h3>
                                    <div id="avatar-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                                    <button onclick="addAvatarRow()"
                                        class="w-full py-1.5 bg-white border border-dashed border-indigo-200 rounded-lg text-[10px] text-indigo-400 font-bold hover:bg-indigo-50 transition-all">ï¼‹
                                        æ–°å¢é ­åƒ</button>
                                </div>
                            </div>
                        </section>

                        <section class="glass-card p-6">
                            <h2 class="text-xl font-bold text-indigo-900 mb-4 border-b pb-3 border-indigo-100">ğŸ“„ åŸå§‹ç¢¼è¼¸å‡º
                            </h2>
                            <div class="space-y-4">
                                <div class="space-y-1">
                                    <span class="text-[10px] font-bold text-gray-500 uppercase">theme.js</span>
                                    <textarea id="output-theme-js"
                                        class="w-full h-40 p-3 bg-gray-900 text-green-400 rounded-xl text-[10px] font-mono"
                                        readonly></textarea>
                                </div>
                                <div class="space-y-1">
                                    <span class="text-[10px] font-bold text-gray-500 uppercase">theme_list.js ç‰‡æ®µ</span>
                                    <textarea id="output-list-js"
                                        class="w-full h-20 p-3 bg-gray-900 text-green-400 rounded-xl text-[10px] font-mono"
                                        readonly></textarea>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- AI è¨­å®š Modal -->
    <div id="ai-settings-modal"
        class="fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-[100] hidden backdrop-blur-sm">
        <div class="glass-card bg-white p-8 w-full max-w-md shadow-2xl">
            <h3 class="text-2xl font-bold text-indigo-900 mb-6 flex items-center gap-2">ğŸ¤– AI è¨­å®š</h3>
            <div class="space-y-4">
                <div class="space-y-2">
                    <label class="text-sm font-bold text-indigo-900 flex items-center gap-2">
                        <img src="https://elevenlabs.io/favicon.ico" class="w-4 h-4"> ElevenLabs API Key (éŸ³æ•ˆèˆ‡éŸ³æ¨‚)
                    </label>
                    <input type="password" id="ai-eleven-key" placeholder="è²¼ä¸Šä½ çš„ ElevenLabs Key"
                        class="w-full p-3 rounded-xl border border-indigo-100 bg-gray-50 focus:bg-white outline-none">
                    <p class="text-[10px] text-gray-400">ç”¨æ–¼ç”Ÿæˆé«˜å“è³ªä¸»é¡ŒéŸ³æ•ˆèˆ‡èƒŒæ™¯éŸ³æ¨‚ï¼ˆé¸å¡«ï¼‰ã€‚</p>
                </div>
                <div class="space-y-2">
                    <label class="text-sm font-bold text-indigo-900 flex items-center gap-2">
                        ğŸ¤– Google Gemini API Key
                    </label>
                    <input type="password" id="ai-api-key" placeholder="è²¼ä¸Šä½ çš„ API Key"
                        class="w-full p-3 rounded-xl border border-indigo-100 bg-gray-50 focus:bg-white outline-none">
                    <p class="text-[10px] text-gray-500">é‡‘é‘°å°‡å„²å­˜åœ¨æ‚¨çš„ç€è¦½å™¨ä¸­ (LocalStorage)ã€‚</p>
                </div>
                <div class="space-y-2 border-t pt-4 border-dashed border-indigo-100">
                    <label class="text-sm font-bold text-purple-900 flex items-center gap-2">
                        â˜ï¸ Cloudflare Worker ä»£ç†ç¶²å€
                    </label>
                    <input type="text" id="ai-proxy-url" placeholder="https://your-worker.workers.dev"
                        class="w-full p-3 rounded-xl border border-purple-100 bg-purple-50 focus:bg-white outline-none">
                    <p class="text-[10px] text-purple-400">è‹¥å¡«å¯«æ­¤é …ï¼Œç³»çµ±å°‡å„ªå…ˆé€éæ‚¨çš„ Worker ä»£ç†è«‹æ±‚ï¼Œé¿å…æš´éœ² API Keyã€‚</p>
                </div>
                <div class="pt-4 flex gap-3">
                    <button onclick="document.getElementById('ai-settings-modal').classList.add('hidden')"
                        class="flex-1 py-3 bg-gray-100 rounded-xl font-bold hover:bg-gray-200 transition-colors">å–æ¶ˆ</button>
                    <button onclick="saveAISettings()"
                        class="flex-1 py-3 btn-primary rounded-xl font-bold shadow-lg">å„²å­˜è¨­å®š</button>
                </div>
            </div>
        </div>
    </div>

    <div id="loading-overlay"
        class="fixed inset-0 bg-white/50 backdrop-blur-md flex flex-col items-center justify-center z-[200] hidden">
        <div class="w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mb-4"></div>
        <div id="loading-text" class="text-indigo-900 font-bold animate-pulse text-lg">AI æ­£åœ¨æ€è€ƒä¸­...</div>
    </div>

    <!-- é›²ç«¯ä¸»é¡Œæ¸…å–® Modal -->
    <div id="cloud-themes-modal"
        class="fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-[100] hidden backdrop-blur-sm">
        <div class="glass-card bg-white p-8 w-full max-w-2xl shadow-2xl flex flex-col max-h-[80vh]">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-indigo-900">ğŸ“‚ é¸æ“‡ç¾æœ‰é›²ç«¯ä¸»é¡Œ</h3>
                <button onclick="document.getElementById('cloud-themes-modal').classList.add('hidden')"
                    class="text-gray-400 hover:text-gray-600 text-2xl">âœ–</button>
            </div>
            <div id="cloud-themes-list" class="flex-grow overflow-y-auto space-y-3 pr-2">
                <!-- ç”± JS å‹•æ…‹æ³¨å…¥ -->
                <div class="text-center py-10 text-gray-400">æ­£åœ¨è®€å–æ¸…å–®...</div>
            </div>
        </div>
    </div>

</body>

</html>